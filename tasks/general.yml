---

- name: "Using scutil to set HostName, ComputerName, and LocalHostName."
  ansible.builtin.hostname:
    name: "{{ hostname }}"
  when: change_hostname

- name: "Write new hostname to SMB server."
  community.general.osx_defaults:
    domain: /Library/Preferences/SystemConfiguration/com.apple.smb.server
    key: NetBIOSName
    type: string
    value: "{{ hostname }}"
    state: present
  when: change_hostname
  become: true

- name: "Expand save panel by default."
  community.general.osx_defaults:
    domain: NSGlobalDomain
    key: NSNavPanelExpandedStateForSaveMode # NSNavPanelExpandedStateForSaveMode2
    type: bool
    value: true
    state: present

- name: "Expand print panel by default."
  community.general.osx_defaults:
    domain: NSGlobalDomain
    key: PMPrintingExpandedStateForPrint # PMPrintingExpandedStateForPrint2
    type: bool
    value: true
    state: present

- name: "Automatically quit printer app once the print jobs complete."
  community.general.osx_defaults:
    domain: com.apple.print.PrintingPrefs
    key: "Quit When Finished"
    type: bool
    value: true
    state: present

- name: "Reveal IP address, hostname, OS version, etc. when clicking the clock in the login window (only)."
  community.general.osx_defaults:
    domain: /Library/Preferences/com.apple.loginwindow
    key: AdminHostInfo
    type: string
    value: HostName
    state: present
  become: true

- name: "Add iOS Simulator to Launchpad."
  ansible.builtin.file:
    src: "/Applications/Xcode.app/Contents/Developer/Applications/Simulator.app"
    dest: "/Applications/Simulator.app"
    owner: "{{ remote_regular_user }}"
    group: staff
    state: link

### Feedback Assistant

- name: "Turn of Feedback Assistant data auto-gathering."
  community.general.osx_defaults:
    domain: com.apple.appleseed.FeedbackAssistant
    key: Autogather
    type: bool
    value: false
    state: present

### Photos

- name: "Photos: Prevent Photos from opening automatically when devices are plugged in."
  community.general.osx_defaults:
    domain: com.apple.ImageCapture
    key: disableHotPlug
    type: bool
    value: true
    state: present

### Mail

- name: "Mail: Copy email addresses as `foo@example.com` instead of `Foo Bar <foo@example.com>` in Mail.app."
  community.general.osx_defaults:
    domain: com.apple.mail
    key: AddressesIncludeNameOnPasteboard
    type: bool
    value: false
    state: present

### Screenshots

- name: "Screenshots: Save to custom folder instead of Desktop."
  community.general.osx_defaults:
    domain: com.apple.screencapture
    key: location
    type: string
    value: "${HOME}/Screenshots"
    state: present

- name: "Screenshots: Change the default file name."
  community.general.osx_defaults:
    domain: com.apple.screencapture
    key: name
    type: string
    value: "src"
    state: present

### Activity Monitor

- name: "Activity Monitor: Show the main window when launching app."
  community.general.osx_defaults:
    domain: com.apple.ActivityMonitor
    key: OpenMainWindow
    type: bool
    value: true
    state: present

- name: "Activity Monitor: Show all processes."
  community.general.osx_defaults:
    domain: com.apple.ActivityMonitor
    key: ShowCategory
    type: int
    value: 0
    state: present

- name: "Activity Monitor: Sort Activity Monitor results by CPU usage"
  community.general.osx_defaults:
    domain: com.apple.ActivityMonitor
    key: SortColumn
    type: string
    value: "CPUUsage"
    state: present

- name: "Activity Monitor: Sort Activity Monitor results by CPU usage - Direction DSC"
  community.general.osx_defaults:
    domain: com.apple.ActivityMonitor
    key: SortDirection
    type: int
    value: 0
    state: present
